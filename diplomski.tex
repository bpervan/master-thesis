\documentclass[times, utf8, diplomski, numeric]{fer}
\usepackage{booktabs}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{bm}
\usepackage{algorithm}
\usepackage{algorithmic}
\usepackage{verbatim}
\usepackage{tikz,times}

\usetikzlibrary{arrows}

\tikzset{
  treenode/.style = {align=center, inner sep=0pt, text centered,
    font=\sffamily},
  arn_n/.style = {treenode, circle, white, font=\sffamily\bfseries, draw=black,
    fill=black, text width=1.5em},% arbre rouge noir, noeud noir
  arn_r/.style = {treenode, circle, red, draw=red, 
    text width=1.5em, very thick},% arbre rouge noir, noeud rouge
  arn_x/.style = {treenode, rectangle, draw=black,
    minimum width=0.5em, minimum height=0.5em}% arbre rouge noir, nil
}

\begin{document}

% TODO: Navedite broj rada.
\thesisnumber{1136}

% TODO: Navedite naslov rada.
\title{Preporučiteljski sustavi u sveprisutnom računarstvu}

% TODO: Navedite vaše ime i prezime.
\author{Branimir Pervan}

\maketitle

% Ispis stranice s napomenom o umetanju izvornika rada. Uklonite naredbu \izvornik ako želite izbaciti tu stranicu.
\izvornik

% Dodavanje zahvale ili prazne stranice. Ako ne želite dodati zahvalu, naredbu ostavite radi prazne stranice.
\zahvala{Ovdje dolazi zahvala}

\tableofcontents

%Spomenuti IoT, recommendere i njihovu primjenu, sveprisutno računarstvo je
%prisutnije no ikad, 
%kako povezati preporučitelje i sveprisutno računarstvo, 
%što se tu ima preporučivati, koji je konkretan scenarij itd

%jednostavno, preporučiteljski sustavi filtriraju informacije iz velikih i nepreglednih baza
%podataka a gdje ćeš više informacija nego u sveprisutnom računarstvu
%koji je motiv za ovaj diplomski -> do sada se nije razvio takav specifičan
% preporučitelj
\chapter{Uvod}
U posljednjih dvadesetak godina razvoj Interneta stvari (\emph{eng. Internet
of Things}) uhvatio je gotovo eksponencijalni zamah, a pojedini izvori navode da
će broj uređaja priključenih na ovu sveprisutnu mrežu do $2020$. g. doseći $26$
milijardi \cite{gartner2013Iot} odnosno $30$ milijardi \cite{ABI2013Iot}. Tomu
značajno doprinosi i konstantno opadanje cijene proizvodnog procesa tehnologije
koja naizgled obične stvari na neki način čini inteligentnima i sposobnima za
komunikaciju. Sveprisutno računarstvo, kao koncept u računarskoj znanosti
gdje je računarstvo prisutno svugdje \cite{theComputerWeiser}, opisuje upravo 
takve vrste stvari i uređaja, ali i takve principe gdje računalo može biti
ugrađeno u bilo kojem uređaju, na bilo kojoj lokaciji i u bilo kojem obliku.

Tu još negjde mora doći dosta toga o preporučiteljima i njihovoj mega
korisnosti 

Potreba i smisao izučavanja ovog područja dolazi iz očitog primjera za
ulaganjem u bolje i efikasnije algoritme jer je u nepreglednoj masi
informacija, kakav je Internet stvari idealan izvor, procesna moć današnjih
računala davno izgubila bitku.

Motiv ovog diplomskog rada jest manjak dostupnih algoritama za ovakvu
specifičnu vrstu preporučitelja. U ovom radu dat će se teorijska
podlogua bazičnih algoritama za filtriranje sadržaja te analizirati prednosti i
nedostatke takvih pristupa. Prikazat će se principi primjene preporučiteljskih
sustava u sveprisutnim aplikacijama te će se prikazati i analizirati posebni
zahtjevi na preporučiteljske sustave od strane takvih aplikacija na konkretnom
scenariju. Na kraju će biti dan prikaz razvijenog preporučiteljskog sustava za
takvu primjenu.

\chapter{Sveprisutno računarstvo}
\section{Uvod u sveprisutno računarstvo}
A šta koji drek ovdje da pričam. Što je sveprisutno računarstvo, tko ga je
definirao, što u njemu dolazi do izražaja, koje su koristi?

Termin \glqq Sveprisutno računarstvo \grqq prvi je upotrijebio Mark Weiser u
svom vizionarskom članku u kojem je rekao kako su najkorisnije
one one tehnologije koje nestaju, u smislu da korisnici izgube pojam o
korištenju te tehnologije \cite{computer21}. 

Cilj filozofije sveprisutnog računarstva nije staviti čovjeka u svijet računala
nego integracija računala u svijet čovjeka. Praktična posljedica toga jest
pojava velike količine mahom nestrukturiranih podataka koje mogu predstavljati
izvrstan materijal za daljnju obradu i izučavanje algoritama kojima se ti podaci
mogu upotrijebiti za analizu ponašanja čovjeka ili za pomoć u svakodnevnim
poslovima \cite{VukoticTankovic}.



\section{Razvoj}
U općem slučaju možemo razlikovati tri velika vala u računalnoj eri. To su:
\begin{enumerate}
  \item Radne stanice (\engl{Mainframe}) - jedno računalo, više osoba
  \item Osobna računala (\engl{PC, Personal Computer}) - jedno računalo, jedna
  osoba
  \item Sveprisutno računarstvo (\engl{Ubiquitous Computing}) - više računala,
  jedna osoba
\end{enumerate}

\begin{figure}[htb]
	\centering
	\includegraphics[width=10cm]{images/majortrends.png}
	\caption{Tri vala u računarstvu(slika ne valja)}
	\label{fig:majortrends}
\end{figure}

\section{Zahtjevi}


koje su glavne potrebe za rad sa sveprisutnim sustavima (mala energija,
procesna moć, interakcija s okolinom)

\section{Primjena}

Udri brigu na veselje u ovom poglavlju natuć za sva vremena xD

\chapter{Preporučiteljski sustavi}
\section{Uvod u preporučiteljske sustave}
Preporučiteljski sustavi su, ukratko rečeno, skup programskih alata i tehnika
koji iz relativno velikog i nepreglednog skupa karakteriziranih informacija
krajnjem korisniku, koji je opet na neki način karakteriziran, filtriraju
informacije o mogućim preferencijama tog korisnika. Općenito, možemo reći da je
jednostavan model preporučiteljskog sustava dan formulom:
\begin{equation}
\label{eq:elementarniModel}
	R \leftarrow U \times I
\end{equation}
gdje je $R$ rezultat, tj. predikcija (\emph{eng. prediction, recommendation}),
preferencije korisnika $U$ (\emph{eng. user}) koji je zatražio preporuku, tj.
filtriranje sadržaja , a $I$ predmet nad kojim se vrši predikcija preferencije
(\emph{eng. item}). Traženje potencijalnih preporuka za korisnika $U$ tada se u
najjednostavnijem slučaju svodi na kombiniranje profila njegovih preferencija s
profilima predmeta u skupu svih predmeta dostupnih algoritmu za filtriranje.
Krajnji rezultat na kraju jest najčešće lista od $n$ najboljih preporuka, tj.
pretpostavki da bi korisnik te predmete ocjenio najbolje (\emph{eng. top -- $N$
list})
Gornji model ima dva osnovna i lako uočljiva ograničenja:
\begin{enumerate}
  \item Traženje preporuka za korisnika svodi se na iscrpno pretraživanje
  prostora predmeta dostupnih algoritmu za filtriranje
  \item Rezultat je preporuka kojoj fali bilo kakav kontekst.
\end{enumerate}

Da bismo doskočili ovim problemima, razmotrit ćemo razne modele preporuke od
kojih su neke već dobro poznati i korišteni algoritmi. Za početak, uvedimo u
formulu \ref{eq:elementarniModel} općeniti kontekst preporuke:
\begin{equation}
\label{eq:elementarniModelSKontekstom}
	R \leftarrow U \times I \times C
\end{equation}
gjde je $C$ kontekst u kojem korisnik $U$ traži preporuku.

Predmet se shvaća generički i on može varirati ovisno o kontekstu primjene,
primjerice, artikli u internet trgovini, knjige u digitalnim knjižnicama, pjesme
i filmovi namultimedijalnim servisima, rezultati pretraživanja na tražilicama,
osobe na društvenim mrežama, smjerovi kretanja u prostoru i u ovisnosti s
vremenom itd. Svaki predmet u korišten od strane algoritma za filtriranje obično
je opisan nekim karakteristikama koji variraju u ovisnosti o kontekstu predmeta.
Tako primjerice neka pjesma može biti opisana žanrom, trajanjem i izvođačem, a
knjiga isto tako žanrom, autorom i brojem stranica. Unositi težine za pojedine
ocjene karakteristika predmeta nije uobičajeno jer na taj način dolazi do
subjektiviziranja rezultata filtriranja na manji skup osoba, ali s druge strane
gledano, nije ni nemoguće.

S druge strane, korisnici sustava imaju različite scenarije korištenja
preporučitelja od kojih su osnovni filtriranje neželjenog sadržaja iz velikih
baza podatak i savjetovanje pri nedostatku vlastite kompetencije za izbor
sadržaja (referenca: ono čudo koje te pita kaj te interesira). Korisnici imaju
svoje preferencije koje su u ovom slučaju uglavnom opisane težinama jer prema
različitim potrebama određene karakteristike predmeta nad kojima se vrši
filtriranje mogu biti zanimljivije, odnosno manje zanimljive.

Interakcijom korisnika sa sustavom omogućuje se praćenje njegovih odabira,
treniranje preporučitelja te kroz analizu profila korisnika i njegovih osobnih
preferencija stvaranje modela za preporuku predmeta na nekoliko načina. Podaci
koje korisnik ostavlja u sustavu u osnovi se mogu podijeliti u dva skupa:
\begin{enumerate}
  \item Implicitni
  \item Eksplicitni
\end{enumerate}
Implicitni podaci su oni podaci koje je sustav prikupio od korisnika bez da ga
je to eksplicitno zatražio. Takvi podaci mogu biti primjerice, demogravski
podaci, točnije, šire područje iz kojeg korisnik koristi sustav a jednostavno se
doznaje iz baze podataka dodijeljenih područja (\emph{eng. scope}) IP adresa.
Također, pod implicitne podatke spadaju i akcije korisnika u sustavu koje se
mogu doznati iz sjedničkih zapisa, kao i tzv. klikovi na određene poveznice
unutar sustava.

S druge strane, eksplicitni podaci su oni koje korisnik ostavlja s namjerom,
primjerice koristeći ankete o svojim preferencijama, ostavljajući povratnu
informaciju na ponuđene predmete (\emph{eng. feedback}) ili odgovarajući na bilo
koji način na upite o pojedinim predmetima.

U općem slučaju, preporučiteljske sustave razlikujemo prema načinu filtriranja i
analiziranja informacija, a razlikujemo četiri osnovna načina (tj. jedan način
pseudofiltriranja i tri načina filtriranja):
\begin{enumerate}
  \item Filtriranje neovisno o korisniku (\emph{eng. Non -- personalized
  filtering})
  \item Filtriranje zasnovano na sadržaju (\emph{eng. Content -- based
  filtering})
  \item Filtriranje zasnovano na suradnji (\emph{eng. Collaborative
  filtering})
  \item Hibridne tehnike filtriranja odnosno preporučivanja
\end{enumerate}

Povijesno gledano, razvoj preporučiteljskih sustava započeo je devedesetih
godina prošlog stoljeća, a nemalo je populariziran $2006$. g. svojevrsnim
natjecanjem \glqq The Netflix Prize \grqq kada je poznati pružatelj multimedije
na zahtjev ponudio nagradu od \$$1,000,000$ američkih dolara za tim koji razvije
preporučitelj bolji od taga postojećeg sustava \glqq Cinematch \grqq za određeni
postotak.
Ovo je ostavilo velik utjecaj na razvoj preporučitelja prvenstveno zbog
činjenice da je u uvjetima natjecanja navedeno da rezultati i principi rada
razvijenih preporučitelja moraju biti javno objavljeni i dostupni
%referenca

\section{Filtriranje neovisno o korisniku}
%TODO negdje ubaciti kako zapravo dobiti preporuku (top N)
Osnovni model filtriranja jest filtriranje neovisno o korisniku. Model preporuke
koji proizlazi iz ovakvog načina filtriranja, strogo gledano, ne može biti
preporučitelj jer preporuka ne ovisi strogo o korisniku. Drugim riječima, svaki
korisnik koji zatraži preporuku od ove vrste filtriranja dobit će istu
preporuku. Ovu tvrdnju mogli bi jednostavnije prikazati relacijom:
\begin{equation}
\label{eq:filtriranjeNeovisnoOKorisniku}
	R \leftarrow I
\end{equation}
gdje je $R$ predikcija, tj. preporuka, a $I$ predmet. Iz relacije
\ref{eq:filtriranjeNeovisnoOKorisniku} očigledno je da je predikcija funkcija
isključivo predmeta, pa kao takva ne može biti smatrana punokrvnim
preporučiteljem.

Razmjerno jednostavna predožba ovog modela jest rejting (\emph{eng. Rating}).
Uzmimo za primjer neki servis za ocjenjivanje i korisničke recenzije
ugostiteljskih objekata. Neka svaki korisnik koji je koristnio uslugu nekog od
objekata ima pristup sustavu u kojem može u više kategorija ostaviti ocjenu iz
nekog intervala s prisanom recenzijom. Također, neka svaki korisnik ima
mogućnost ocijeniti uslugu brojčanom ocjenom iz intervala od jedan do pet. Model
preporučitelja u tom slučaju bio bi opisan s:
\begin{equation}
\label{eq:skupOcjena}
	S = \{1, 2, 3, 4, 5\}
\end{equation}
\begin{equation}
\label{eq:prosjek}
	R = \lfloor \frac{\sum_{i=1}^{N} s_i}{N} \ast 10 \rfloor
\end{equation}
gdje je $S$ skup mogućih ocjena, $R$ konačan rejting predmeta, $N$ ukupan broj
korisnika koji su ocjenili taj predmet, a $s_i$ ocjena $i$-tog korisnika. Iako,
izgrađeni model preporuke strogo gledano nije preporučitelj, on to ipak čini
posredno nudeći korisniku ono što su drugi korisnici obilježili kao poželjnije.
Ovakav model obično koriste usluge s povratnom informacijom korisnika
(\emph{eng. Feedback}), npr. \emph{eBay}, \emph{Tripadvisor} i \emph{Zagat}.
Elemente ovog preporučitelja prikazane relacijama \ref{eq:skupOcjena} i
\ref{eq:prosjek} možemo varirati kako bi prilagodili izgrađeni model drugim
sustavima, primjerice:
\begin{itemize}
  \item Skup ocjena $S$. Ovisno o potrebi, moguće je skup proširiti do potrebnog
  broja ocjena, imajući na umu da veća granulacija nije nužno bolja, kao i da
  može biti beskorisna u vidu onemogućenja korisnika da predmet ocjeni spontano,
  a da neće biti vidljiva u krajnjem rezultatu. Također, granulaciju je moguće
  povećati dozvoljavanjem ocjena van skupa cijelih brojeva.
  \item Prikaz rezultata $R$. U formuli \ref{eq:prosjek} prije zaokruživanja
  prosjek je pomnožen faktorom $10$ radi eliminacije decimala. Moguće je
  odabrati neki drugi prikaz rezultata, primjerice u postotcima.
\end{itemize}
Sam način ocjenjivanja ne mora nužno biti eksplicitna dodjela ocjene. Moguće je
primjerice koristiti sustav glasovanja \engl{Vote up/down} (\emph{eng. Vote
up/down}).
Najpoznatiji primjeri koji koriste takve ocjene su \emph{Reddit} i \emph{StackOverflow}.

U općem slučaju modeli preporučitelja zasnovani na ovakvoj vrsti filtriranja
imaju dvije mane:
\begin{itemize}
  \item Zavaravanje korisnika od strane rejtinga koji je, neovisno o načinu
  prikaza, i dalje samo prosjek pojedinačnih ocjena.
  \item Nedostatak konteksta za preporuke.
\end{itemize}

Potonji problem posebno se manifestira prilikom asocijativnog preporučivanja.
Uzmimo za primjer da tražimo preporuku za neki predmet koji je dodatak na neki
već postojeći predmet, primjerice, tražimo preporuku za preljev za sladoled.
%TODO a gdje ovo utrpati
Izgradimo sada jednostavan model prema kojem bi mogli dobiti nepersonaliziranu
preporuku za predmet koji ovisi o drugom predmetu. Neka su $X$ i $Y$ skupovi
svih korisnika koji su kupili proizvode $X$ i $Y$ respektivno.

Intuitivno se nameće da ukoliko je više korisnika kupilo proizvod $X$ i uz njega
proizvod $Y$ da će i ostalim korisnicima (koji traže preporuku) proizvod $Y$
odgovarati uz proizvod $X$. Elementarnom algebrom skupova možemo dakle
zaključiti da se predikcija za nekog korisnika može izraziti relacijom:
\begin{equation}
\label{eq:naivnaNepersonaliziraniTemp}
	R = \frac{\mid X \cap Y \mid}{\mid X \mid}
\end{equation}
Osnovni problem proizlazi iz činjenice da su određeni predmeti neovisno
popularni. Primjerice, u nekom dućanu, moguće je da većina korisnika kupuje neki
predmet pa može doći do lažne korelacije popularnog predmeta s nekim drugim
predmetom. Drugi problem je nepostojanost veze između predmeta iz skupa $X$ i
$Y$ u smislu asocijativnosti. Ukoliko je $X$ skup sladoleda, a $Y$ skup
preljeva, korisniku bi kao preporuku trebalo izdvojiti preljeve za sladoled iz
skupa $Y$. 

\begin{equation}
\label{eq:nepersonalizirani}
	R = \frac
		{\frac
			{\mid X \cap Y \mid}
			{\mid X \mid}}
		{\frac
			{\mid \overline{X} \cap Y\mid}
			{\mid \overline{X} \mid}}
\end{equation}

Preporuka korisniku na kraju se jednostavno svodi na prikaz prvih $N$ najboljih
prosječnih ocjena.

Naivni preporučitelj preporuku može dati korištenjem intuitivno izvedive
formule:
\begin{equation}
\label{eq:naivnaNepersonalizirani}
	R = \frac{X \cap Y}{X}
\end{equation}
gdje su $X$ i $Y$ skupovi svih korisnika koji su kupili proizvode 

\section{Filtriranje ovisno o korisniku}
Za razliku od filtriranja neovisnog o korisniku, filtriranje ovisno o korisniku
uzima u obzir korisnika i njegove preferencije.
\subsection{Filtriranje zasnovano na sadržaju}
Razmotrimo situaciju kada ne tretiramo korisnike ili predmete kao osnovne
(atomarne) jedinice, nego ih možemo opisati nekim kategorijama, primjerice,
demografskim podacima za korisnika, autorom i izdavačem ako je predmet neka
knjiga i sl. Preporučivanje zasnovano na sadržaju u osnovi dovoi u vezu
prikupljene preferencije korisnika, bilo eksplicitno, bilo implicitno. Neka je u
sustavu koji koristi preporučitelj zasnovan na sadržaju svaki predmet opisan
tekstualnim medapodacima i vektorom:
\begin{equation}
\label{eq:vektorKarakteristika}
	\boldsymbol{X_i} = 
		\big[ 
			\boldsymbol{w_{1,i}}, 
			\boldsymbol{w_{2,i}}, 
			\boldsymbol{w_{3,i}}, 
			\ldots, 
			\boldsymbol{w_{N,i}} 
		\big]^T
\end{equation}
gdje je $\boldsymbol{w_{j,i}}$ kvantitativni, tj. brojčani opis neke $j$-te
karakteristike za $i$-ti predmet. Težina je neka proizvoljno odabrana metrika
koja može varirati od jednostavnog broja pojavljivanja, uključujući $0$/$1$
pristup (karakteristika je primjenjiva, odnosno karakteristika nije
primjenjiva) do precijznijih metrika. Sličnost između dva predmeta moguće je
tada izraziti kosinusom kuta između vektora njihovih karakteristika. 
\begin{equation}
\label{eq:kosinus}
	\boldsymbol{cos}(\boldsymbol{V}_1, \boldsymbol{V}_2) = 
		\frac
			{\boldsymbol{V}_1 \ast \boldsymbol{V}_2}
			{\|\boldsymbol{V}_1\| \times \|\boldsymbol{V}_2\|}
\end{equation}
Tu još negdje ubaci da svaka karakteristika može imati svoju težinu, u smislu da
neka karakteristika može biti važnija.
Također, neka za svakog korisnika postoji korisnički profil sa dostupnim
preferencijama korisnika dostupnim u vektorskom zapisu gdje $i$-ta komponenta
vektora predstavlja težinu te karakteristike za korisnika. Tada je na sličan
način moguće izraziti kompatibilnost promatranog korisnika i predmeta. U
ovisnosti o kontekstu primjene, vektore je poželjno i normalizirati.
Jedna od većih prednosti ovog načina filtriranja je što može stvarati preporuke
neovisno o tome je li za predmet davana povratna informacija ili ne. Drugim
riječima, ovaj način filtriranja iznimno je prikladan na početku rada sustava
jer nema problema s takozvanim hladnim početkom (\emph{eng. Cold start}). Isto
tako, prikladan je za primjene gdje je moguće relativno dobro strukturiranim
karakteristikama opisati predmete. S druge strane, nepogodan je ukoliko ga
se implementira u sustave gdje korisnici dolaze rijetko ili relativno često
mijenjaju preferencije. Zbog svega navedenog, ova vrsta filtriranja uglavnom se
upotrebljava u sustavima za pregledavanje vijesti, personaliziranim servisima za
multimediju, video na zahtjev i sl.

Nešto tu ne štima vezano uz težine. Komponente vektora zapravo su kvantitativni
opis, brojka, to nisu težine. Težine, koje predstavljaju koja je karakteristika
korisniku koliko važna su u drugom vektoru?

\subsection{Filtriranje zasnovano na suradnji}
Suradnički pristup dijametralno je suprotan sadržajnom pristupu. Princip rada
ove vrste filtriranja suradnja je između pojedinih korisnika odnosno predmeta.
Definicija ove vrste suradnje zapravo leži u određivanju sličnosti između dvaju
korisnika ili predmeta, a glavna premisa jest da preferencije predmeta uglavnom
važe za sve korisnike koji imaju iste interese ili su slično ocijenili slične
predmete. Primjerice, razmatranjem slučaja gdje dva različita korisnika dodijele
dvije relativno slične ocjene nekom predmetu, zaključak jest da je vjerojatnost
da su ta dva korisnika slično ocjenila i neke druge predmete razmjerno velika. S
druge strane, veća je vjerojatnost da će neki korisnik ocjeniti slično neka dva
predmeta ako su ih i ostali korisnici slično ocjenili.

Zbog usporedbi i rada na dvije različite razine, korisničkoj i predmetnoj, ovaj
preporučitelj se u osnovi dijeli na dvije moguće tehnike:
\begin{itemize}
  \item Korisnik-korisnik (\emph{eng. User-user, Neighbourhood-based,
  Memory-based})
  \item Predmet-predmet (\emph{eng. Item-item, Item-based, Model-based})
\end{itemize}

\subsubsection{Korisnik -- Korisnik}
Suradničko filtriranje na relaciji između korisnika koji traži preporuku i
ostalih korisnika sustava svodi se na predikciju ocjene korisnika koji traži
preporuku za neki predmet na osnovu ocjena njemu bliskih ljudi gdje je bliskost
dva korisnika dobro definirana nekom metrikom, npr. Pearsonovim koeficjentom
korelacije (\ref{eq:pearsonKorisnik})

\begin{equation}
\label{eq:pearsonKorisnik}
	R = \frac
			{\sum_{i \epsilon I} 
				\big[
					(r_{k,i} - \overline{r_k}) \ast
					(r_{u,i} - \overline{r_u})
				\big]
			}
			{
				\sqrt{{\sum_{i \epsilon I} (r_{k,i} - \overline{r_k})^2}} \ast 
				\sqrt{{\sum_{i \epsilon I} (r_{u,i} - \overline{r_u})^2}}
			}
\end{equation}

gdje je $w_{q,u}$ težina između aktivnog korisnika $k$ i korisnika $u$, $i$ skup
predmeta koje su ocijenila oba korisnika, $r_{u,i}$ ocjena koju je korisnik $u$
dodijelio predmetu $i$, a $\overline{r_u}$ srednja vrijednost svih ocjena koje
je dodijelio korisnik $u$.

Alternativno, ocjene korisnika možemo predstaviti kao vektore u
$m$ - dimenzionalnom prostoru pa se težina može izraziti preko skalarnog
produkta kao kosinus kuta između ta dva vektora:

\begin{equation}
\label{eq:pearsonKosinus}
	w_{k,u} = 
		\cos{(\vec{r_k}, \vec{r_u})} = 
		\frac
			{\vec{r_k} \ast \vec{r_u}}
			{\|\vec{r_k}\| \times \|\vec{r_u}\|} = 
		\frac
			{\sum_{i=1}^m r_{k,i} \ast r_{u,i}}
			{\sqrt{\sum_{i=1}^m r_{k,i}^2} \ast \sqrt{\sum_{i=1}^m r_{u,i}^2}}
\end{equation}

Mana pristupa \ref{eq:pearsonKosinus} jest nedostatak negativnih ocjena.

Neka je $K$ skup svih korisnika nekog sustava. Također, neka je $k$ korisnik iz
skupa $K$ koji traži preporuku za neki predmet. Tada je susjedstvo $N$
korisnika $k$ definirano kao
\begin{equation}
\label{eq:susjedstvo}
	N = K \backslash \{k\}
\end{equation}

S obzirom na relaciju \ref{eq:susjedstvo} i metriku za ocjenu bliskosti
(\ref{eq:pearsonKorisnik}) ili \ref{eq:pearsonKosinus} dan je algoritam za
filtriranje na relaciji više korisnika:
\ref{algo:korisnik-korisnik}
\begin{algorithm}
	\caption{Korisnik-korisnik filtriranje}
	\label{algo:korisnik-korisnik}
	\begin{algorithmic}
		\STATE{\textbf{Ulaz:} $k$ - korisnik za kojeg se traži predikcija. $N$ -
		susjedstvo korisnika}
		\STATE{\textbf{Izlaz:} Predikcija $p$ ocjene korisnika $K$ za predmet $P$.}
		\STATE{topN := $20$}
		\STATE{n := length($N$)}
		\STATE{w := initVector()}
		\FOR{($i := 0; i < n; inc(i)$)}
			\STATE{$w_i := calculatePearson(k, N_i)$}
		\ENDFOR
		\STATE{sort(w)}
		\STATE{$suma := 0; tezine := 0$}
		\FOR{($i := 0; i < topN; inc(i)$)}
			\STATE{$suma := suma + w_i * N_i$}
			\STATE{$tezine := tezine + w_i$}
		\ENDFOR
		\STATE{$p := suma / tezine$}
		\RETURN{p}
	\end{algorithmic}
\end{algorithm}

Algoritam se ugrubo svodi na:
\begin{enumerate}
  \item Dodjelu težine svim susjedima korisnika $k$.
  \item Odabir $n$ susjeda koji imaju najveće težine s obzirom na korisnika $k$
  gdje je broj tih susjeda ($topN$) određen empirijski.
  \item Izračun predviđanja ocjene korisnika $k$ iz težinskog prosjeka ocjena
  odabranih korisnika
\end{enumerate}

Ovaj pristup je relativno efikasan i jednostavan za implementaciju, ali druge
strane, računalno postaje vrlo zahtjevan ako se primjeni na velike baze podataka
korisnika i predmeta. U algoritmu \ref{algo:korisnik-korisnik} se može vidjeti
da $for$ petlja ima $N$ prolazaka, a za svaki taj prolazak računa se Pearsonov
koeficjent korelacije dan formulom \ref{eq:pearsonKorisnik} ($I$ puta).
Složenost tada iznosi:
\begin{equation}
\label{eq:slozenostKorisnik}
	O(N \ast I)
\end{equation}

Iako ocjene \ref{eq:slozenostKorisnik} pokazuje je ovisnost linearna,
ipak se vidi da povećanjem broja korisnika ili predmeta dolazi do
značajnog povećanja potrebnog broja operacija za izračun preporuke. 
Valja dodati i da je algoritam \ref{algo:korisnik-korisnik} pojednostavljena
verzija algoitma, pa ni ocjena \ref{eq:slozenostKorisnik} ne može biti uzeta
kao konačna.

\subsubsection{Predmet -- Predmet}
S obzirom na nedostatke prethodne tehnike u performansama, inženjeri poznate
internetske trgovine \emph{Amazon.com} predložili su sličan pristup ali iz druge
perspektive gdje se ne traže sličnosti između korisnika, nego između predmeta
\cite{amazon}. Kao i kod prethodno opisanog pristupa i algoritma
\ref{algo:korisnik-korisnik}, metrika za ocjenu sličnosti između predmeta je
Pearsonov koeficjent korelacije, u ovom slučaju definiran kao:

\begin{equation}
\label{eq:pearsonPredmet}
	R = \frac
			{\sum_{u \epsilon U} 
				\big[
					(r_{u,i} - \overline{r_i}) \ast
					(r_{u,j} - \overline{r_j})
				\big]
			}
			{
				\sqrt{{\sum_{u \epsilon U} (r_{u,i} - \overline{r_i})^2}} \ast 
				\sqrt{{\sum_{u \epsilon U} (r_{u,j} - \overline{r_j})^2}}
			}
\end{equation}

gdje je $U$ skup svih korisnika koji su ocjenili predmete $i$ i $j$, $r_{u,i}$
ocjena korisnika $u$ za predmet $i$, a $\overline{r_i}$ srednja ocjena $i$-tog
predmeta za sve korisnike. Predviđanje ocjene korisnika $k$ za predmet $i$
računa se korištenjem težinskog prosjeka:
\begin{equation}
\label{eq:tezinskiProsjek}
	p_{k,i} = 
		\frac
			{\sum_{j \epsilon N} r_{k,j} \ast w_{i,j}}
			{\sum_{j \epsilon N} \|w_{i,j}\|}
\end{equation}
gdje je $N$ susjedstvo predmeta ocjenjenih od strane korisnika $k$ najsličnijih
predmetu $i$. Jedan od najpoznatijih preporučitelja na svijetu, internetska
trgovina \emph{Amazon.com} koristi patentirani hibridni algoritam baziran na
ovoj tehnici.
\section{Hibridni tehnike}
\begin{enumerate}
  \item Težinski - ocjena predmeta preporuke računa se iz svih dostupnih
  preporučiteljskih tehnika u sustavu. Najjednostavniji primjer jest linearna
  kombinacija preporuka. Neki sustavi koji koriste ovu tehniku kombiniraju
  preporuke zasnovane na suradnji i preporuke zasnovane na sadržaju uz
  kalibraciju težina u ovisnosti o povratnoj informaciji korisnika.
  \item Izmjenični - kod ove tehnike sustav koristi neki predefinirani kriterij
  za izmjenu tehnike preporuke, primjerice, neka je dan sustav koji inicijalno
  za svakog korisnika koristi preporuku zasnovanu na suradnji. Ako sustav tom
  tehnikom ne može stvoriti preporuku određenog nivoa pouzdanosti, rpebacuje se
  na preporuku zasnovanu na sadržaju.
  \item Miješani - ova tehnika računa preporuke iz više elementarnih
  preporučitelja i prikazuje ih simultano.
  \item Kombinacija obilježja - jedan od načina za spajanje suradnjičkog i
  sadržajnog preporučitelja jest interpretirati informacije suradničkog
  preporučitelja kao dodatne podatke koji čine ulaz sadržajnog preporučitelja.
  \item Kaskada - ova tehnika predstavlja svojevrsnu dvorazinsku preporuku. Prvo
  jedan preporučitelj relativno grubo rangira potencijalne kandidate, a nakon
  toga drugi preporučitelj radi precizniju razdiobu. Tehnika je posebno pogodna
  za one slučajeve kada jedan preporučitelj ne može dovoljno precizno generirati
  predviđanja za preporuke predmeta.
  \item Pojačavanje obilježja - tehnika kod koje je generirano predviđanje ili
  klasifikacija predmeta jednog preporučitelja pripojena slijedećoj
  preporučiteljskoj tehnici u nizu.
  \item Meta razina - izlaz jednog preporučitelja je ulaz drugog preporučitelja.
\end{enumerate}

Konkretne primjene preporučiteljskih sustava u heterogenim okolinama, danas se
svode u velikoj mjeri na različite hibride osnovnih tehnika. Velike industrije
trgovine i zabavnih sadržaja u praksi imaju autorska algoritamska rješenja
hibridnih preporučitelja.
\section{Moguća područja primjene}
\section{Preporučiteljski sustavi u sveprisutnom računarstvu}
specifičnosti, koji postoje, mobilni uređaji, foursquare itd.
\chapter{Izgrađeni model preporučiteljskog sustava}
Izražen prostorno vremenski kontekst (općenito)
dvije razine reinforcementa
koje je pravo vrijeme za reinforcement
dva profila -> privremeni i trajni profil pa zbroj nakon kupnje
netko svaka dva tjedna kupuje jabuke pa mu se svaka dva tjedna kupuju jabuke
(recurring) 
\section{Preporučiteljski sustavi s izraženom prostornom i vremenskom
komponentom}
\section{Prostorna komponenta}
\section{Vremenska komponenta}
\chapter{Ispitivanje modela}
\section{Ispitni scenarij}
\section{Simulacija primjene}
\section{Provođenje testiranja}
\section{Scenariji korištenja}
\section{Rezultati testiranja}

\chapter{Modeliranje podataka}
\section{Hijerarhijsko modeliranje}
\begin{figure}[htb]
	\centering
	\includegraphics[width=14.515cm]{images/storestruct.png}
	\caption{Hijerarhijsko modeliranje dućana}
	\label{fig:storestruct}
\end{figure}
Slika \ref{fig:storestruct} je dana kao ekstremno jednostavan primjer
mogućnosti modeliranja hijerarhije. Na njoj se može vidjeti kako je korijen
hijerarhijskog stabla model razmatranog dućana. U prvom nižem sloju dućan se u
općem slučaju dijeli u čisto fizičkom smislu na redove, tj. lokacije. Dalje u
nižim slojevima slijede skupine proizvoda. Ovdje valja napomenuti kako je moguće
da se za neke predmete hijerarhija proteže kroz više razina zbog prirodnog
hijerarhijskog modela specifičnog za te predmete. Na kraju, listovi stabla
predstavljaju konkretne predmete.

Kao što je već navedeno, svaki čvor stabla predstavlja jedan konkretan
predmet.
Zbog toga, čvor kao takav enkapsulira sve ono čime je taj konkretni predmet
predstavljen u sustavu. U općem slučaju to su:
\begin{itemize}
  \item Metapodaci, kao npr.
	\begin{itemize}
	  \item Interni identifikacijski kod predmeta
	  \item Barkod \engl{Bar code}
	  \item Naziv
	  \item Proizvođača
	\end{itemize}
  \item Vektor karakteristika
\end{itemize}

\section{Modeliranje korisnika}
\begin{enumerate}
  \item multiplus profil, znamo tko što voli, tj. imamo profil korisnika
  \item dopuna profila? kroz šetnju, kroz zadržavanje, kada kupi?
  \item cold start profil?
\end{enumerate}

Profil:
\begin{enumerate}
  \item Proizvodi, skupine proizvoda, redovi? -> stablo?
  \item vektor preferencija
\end{enumerate}
\section{Modeliranje predmeta}

\chapter{Problem vremena i prostora}
Osnovni problem s kojim se konvencionalni preporučiteljski sustavi susreću (a
time i popularniji radni okviri i biblioteke koji ih implementiraju) jest
izostanak bilo kakve potpore za prostorne i vremenske komponente koje
su se pokazale neophodne za rad sa sveprisutnim sustavima.
%Za sveprisutno prostor i vrijeme su jedne od bitnijih stavki (referenca?)

\section{Vremenska komponenta}
\glqq subota \grqq vs. \glqq utorak \grqq
\section{Prostorna komponenta}
lokacija unutar dućana

\chapter{Razvoj algoritma i radnog okvira}
\section{Ulazi i izlazi}
\begin{enumerate}
  \item logovi (id + rss)
  \item multiplus id
  \item lokacija beacona s id-em
  \item multiplus profil (kontekstualizirani), vremenski
  \item tendencija kretanja
\end{enumerate}
\begin{enumerate}
  \item lista s obzirom na lokaciju i vrijeme
  \item s obzirom na očekivani profil kupnje
\end{enumerate}

+Generalizacija -> kako bi se isti sustav koristio na FERu recimo
+blagajna -> reinfrcement
+fade out efekt
+akcije (u konzumu)
\chapter{Testiranje i evaluacija}
\section{Metodologija}
\section{Testiranje}
\section{Evaluacija preporučitelja}

\chapter{Zaključak}
Zaključak.

\bibliography{literatura}
\bibliographystyle{fer}

\begin{sazetak}
Sažetak na hrvatskom jeziku.

\kljucnerijeci{Ključne riječi, odvojene zarezima.}
\end{sazetak}

% TODO: Navedite naslov na engleskom jeziku.
\engtitle{Recommender systems in ubiquituous computing}
\begin{abstract}
Abstract.

\keywords{Keywords.}
\end{abstract}

\end{document}
